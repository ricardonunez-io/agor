# Agor Docker Development Environment Configuration
# Copy this file to .env and customize for your setup

# ==============================================================================
# Database Configuration
# ==============================================================================

# Database dialect: 'sqlite' (default) or 'postgresql'
# AGOR_DB_DIALECT=sqlite

# --- PostgreSQL Configuration (only when AGOR_DB_DIALECT=postgresql) ---
# To use PostgreSQL: docker-compose --profile postgres up
# DATABASE_URL will be auto-set to postgresql://agor:agor_dev_secret@postgres:5432/agor

# PostgreSQL connection URL (alternative to individual settings below)
# DATABASE_URL=postgresql://user:password@host:port/database

# PostgreSQL individual settings (used if DATABASE_URL not set)
# POSTGRES_DB=agor
# POSTGRES_USER=agor
# POSTGRES_PASSWORD=agor_dev_secret
# POSTGRES_PORT=5432

# ============================================================================
# Port Configuration
# ============================================================================

# Daemon API port (default: 3030)
DAEMON_PORT=3030

# UI development server port (default: 5173)
UI_PORT=5173

# CORS origin (default: * for dev, set specific origins in prod)
# CORS_ORIGIN=http://localhost:5173

# ============================================================================
# Development Data Seeding
# ============================================================================

# Seed development fixtures on first startup (default: false)
# Creates: Agor repo (https://github.com/preset-io/agor.git) + test-worktree
SEED=false

# ============================================================================
# AI Agent API Keys (Optional)
# ============================================================================

# Anthropic Claude API key for Claude Code sessions
# ANTHROPIC_API_KEY=sk-ant-...

# OpenAI API key for Codex sessions
# OPENAI_API_KEY=sk-...

# Google Gemini API key for Gemini sessions
# GEMINI_API_KEY=...

# ============================================================================
# Advanced: Host UID/GID Mapping (Linux Only)
# ============================================================================

# On Linux, you can optionally run the container as your host user to avoid
# the automatic permission fix and ensure container-created files match your
# host user ownership. Uncomment these lines and set to your UID/GID:
#
# Get your UID/GID with: id -u && id -g
# UID=1000
# GID=1000
#
# Then create docker-compose.override.yml with:
#   services:
#     agor-dev:
#       user: "${UID:-1000}:${GID:-1000}"
#
# Note: On macOS/Windows, Docker Desktop handles UID mapping automatically.
# This setting is unnecessary (and may cause issues) on those platforms.

# ==============================================================================
# Docker Compose Profiles
# ==============================================================================

# Automatically enable postgres profile (alternative to --profile flag)
# COMPOSE_PROFILES=postgres

# ==============================================================================
# PostgreSQL + RBAC Testing (--profile postgres)
# ==============================================================================

# For complete RBAC + Unix integration testing, use the postgres profile:
#   docker compose --env-file .env.postgres up
#
# This enables:
# - PostgreSQL database (multi-user capable)
# - RBAC feature flag (worktree permissions)
# - Unix integration (groups, filesystem permissions)
# - Test users (alice, bob) with SSH access
# - Different ports (4091/6091) to run alongside SQLite mode
#
# See docker/README.postgres.md for testing guide
